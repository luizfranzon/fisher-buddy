import React, { useState } from 'react'

interface ProgressBarProps {
  progress: number
  width?: number
  height?: number
  className?: string
}

export function ProgressBar({
  progress = 0,
  width = 700,
  height = 125,
  className,
}: ProgressBarProps) {
  if (progress < 0 || progress > 100) {
    throw new Error('Progress must be between 0 and 100')
  }

  const [screenWidth, setScreenWidth] = useState(window.innerWidth)

  window.addEventListener('resize', () => {
    setScreenWidth(window.innerWidth)
  })

  const progressBarPercantageMultipliedBy10 = progress * 10

  if (screenWidth >= 736) {
    width = 700
  } else if (screenWidth < 736 && screenWidth > 536) {
    width = 500
  } else if (screenWidth <= 536) {
    width = 340
  }

  return (
    <svg
      className={className}
      xmlns="http://www.w3.org/2000/svg"
      width={width}
      height={height}
      fill="none"
      viewBox="0 0 1015 125"
    >
      <g clipPath="url(#clip0_58_2)">
        <path fill="#323335" d="M1004.85 10H15.225v105h989.625V10z"></path>
        <path
          fill="#44997E"
          d={`M1004.83 10H4.833v105h${progressBarPercantageMultipliedBy10}V10z`}
        ></path>
        <mask
          id="mask0_58_2"
          style={{ maskType: 'luminance' }}
          width="1015"
          height="125"
          x="0"
          y="0"
          maskUnits="userSpaceOnUse"
        >
          <path
            fill="#fff"
            fillRule="evenodd"
            d="M0 97.635v-66.35c0-2.124 1.015-4.123 1.015-6.248C2.03 8.044 6.09-.328 15.225.172c8.12.375 16.24 1.374 23.345 1.25 24.36-.25 49.735-1 74.095-1.25 2.03-.125 5.075 1.25 8.12 1.749 5.075 1 10.15 2.999 14.21 2.749 10.15-.875 20.3-4.123 29.435-4.373 21.315-.625 41.615.25 61.915.25 60.9.124 120.785-.125 181.685 0 20.3.124 40.6.75 59.885 1.874 9.135.5 18.27 3.249 27.405 4.373 5.075.75 11.165 2.25 16.24-5.748 0-1.374 3.045-1 3.045-1 72.065 0 145.145 0 217.21.126 0 0 3.045.874 5.075 1.374 4.06 1.125 8.12 3.249 12.18 2.999C759.22 3.67 770.385.422 780.535.297 854.63-.078 928.725.172 1001.8.047c4.06 0 6.09 2.249 8.12 8.497 1.02 4.998 2.03 9.996 3.05 15.369 1.01 17.368 1.01 34.987 2.03 52.48 0 12.12-1.02 22.742-4.06 33.488-2.03 8.247-5.08 10.621-9.14 11.121-24.355 2.374-47.7-2.625-71.045-1.25-56.84 3.124-112.665.875-168.49 1.125-5.075 0-10.15 2.749-15.225 4.123h-9.135c-4.06-1.374-8.12-4.123-12.18-3.998-29.435.249-58.87.499-89.32 1.624-83.23 2.374-166.46-6.748-249.69-.75-57.855 3.124-115.71 1.125-173.565.625-13.195 0-27.405-3.499-40.6-3.499-53.795.125-107.59 1.25-161.385 1.75-6.09.125-9.135-4.874-10.15-17.619C1.015 101.259 0 99.51 0 97.635zM65.975 34.41c0 .75 0 1.374-1.015 2.124-2.03-1.874-4.06-5.373-7.105-5.498-13.195-.625-26.39-.5-39.585 0 0 0-3.045 4.373-3.045 7.247C14.21 48.53 14.21 59.025 14.21 69.271c0 16.244 1.015 20.992 11.165 19.992C43.645 87.64 60.9 85.14 79.17 85.265c45.675.375 91.35 1.874 137.025 2.624 4.06.125 8.12-1.75 12.18-2.75 2.03 1.25 5.075 4.124 8.12 4.124 25.375.25 50.75.125 76.125-.125 13.195-.125 25.375-.25 37.555-1 10.15-.499 19.285-2.498 29.435-2.498 10.15-.125 19.285 1.624 28.42 2.124 10.15.625 20.3-.75 29.435 1.25 9.135 1.999 18.27-2.125 28.42-.126 9.135 2 19.285-1.249 29.435-1.499 11.165-.25 23.345.375 34.51.75 2.03.125 5.075 1.624 7.105 1.5 16.24-.25 32.48-.376 48.72-1.25 19.285-1 38.57-4.124 57.855-3.749 33.495.75 65.975 4.498 99.47 5.123 29.435.5 59.885-2.124 89.32-2.249 51.765-.375 104.545.375 157.325 0 15.225 0 11.165-.125 15.225-25.116v-1.874c1.01-23.491-1.02-27.74-13.195-27.99-24.36-.624-49.735-1.499-74.095-1.499-14.21 0-27.405 1-40.6 2.999-5.075.75-10.15 4.873-14.21-2.25-1.015-1.748-3.045-.999-5.075-.874-17.255 1.875-33.495 4.373-50.75 5.623-21.315 1.5-41.615 1.874-62.93 3.124-7.105.5-15.225 1.25-22.33-5.248-2.03-1.624-4.06-1.375-6.09-1.5-21.315 0-42.63-.124-64.96.125-2.03 0-5.075 2.5-8.12 3.5-3.045.874-5.075 2.123-8.12 1.748-5.075-.75-11.165-3.373-16.24-3.623-38.57-1.75-76.125-3.749-114.695-4.499-25.375-.5-50.75-.75-76.125 2.375-41.615 4.873-83.23 6.122-124.845 1.874-22.33-2-45.675-3.874-69.02-2.25-52.78 3.75-106.575 3.5-159.355-.874-3.045-.25-6.09 2-8.12 3.124z"
            clipRule="evenodd"
          ></path>
        </mask>
        <g mask="url(#mask0_58_2)">
          <path fill="#0F0D09" d="M1015 .047H0V125h1015V.047z"></path>
        </g>
      </g>
      <defs>
        <clipPath id="clip0_58_2">
          <path fill="#fff" d="M0 0H1015V125H0z"></path>
        </clipPath>
      </defs>
    </svg>
  )
}
